<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, push, set, onValue, remove, update, child, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        // Firebase configuration - ‡πÉ‡∏ä‡πâ Firebase Authentication ‡πÅ‡∏•‡∏∞ Realtime Database ‡∏à‡∏£‡∏¥‡∏á
        const firebaseConfig = {
           apiKey: "AIzaSyCs7dV8-B151tvnO2bgDlF0uwK_7R3mmmQ",
  authDomain: "thai-bf4f0.firebaseapp.com",
  databaseURL: "https://thai-bf4f0-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "thai-bf4f0",
  storageBucket: "thai-bf4f0.firebasestorage.app",
  messagingSenderId: "953478240466",
  appId: "1:953478240466:web:a9d160b96ed569b14eb50b",
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth(app);
        
        // Make Firebase functions globally available
        window.firebase = { 
            database, ref, push, set, onValue, remove, update, child, get,
            auth, signInWithEmailAndPassword, signOut, onAuthStateChanged, createUserWithEmailAndPassword
        };
        
        console.log('üî• Firebase Authentication ‡πÅ‡∏•‡∏∞ Realtime Database ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
    </script>
    
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(-100%); } to { transform: translateX(0); } }
        .announcement-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .announcement-card:hover {
            transform: translateY(-4px);
            border-color: #059669;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .apply-btn {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transition: all 0.3s ease;
        }
        .apply-btn:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: scale(1.05);
        }
        .post-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            transition: all 0.3s ease;
        }
        .post-btn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: scale(1.05);
        }
        .admin-btn {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transition: all 0.3s ease;
        }
        .admin-btn:hover {
            background: linear-gradient(135deg, #b91c1c, #991b1b);
            transform: scale(1.05);
        }
        .delete-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            transition: all 0.3s ease;
        }
        .delete-btn:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: scale(1.05);
        }
        .edit-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            transition: all 0.3s ease;
        }
        .edit-btn:hover {
            background: linear-gradient(135deg, #d97706, #b45309);
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-blue-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg border-b-4 border-blue-600">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <!-- Platform Logo -->
                    <div class="flex items-center space-x-3">
                        <svg width="50" height="50" viewBox="0 0 100 100" class="text-blue-600">
                            <!-- Background circle -->
                            <circle cx="50" cy="50" r="45" fill="currentColor" stroke="#2563eb" stroke-width="2"/>
                            <circle cx="50" cy="50" r="35" fill="none" stroke="white" stroke-width="2"/>
                            
                            <!-- Civil servant figure in khaki uniform -->
                            <!-- Head -->
                            <circle cx="50" cy="25" r="8" fill="#fdbf50"/>
                            
                            <!-- Hair -->
                            <path d="M42 20 Q50 15 58 20 Q58 25 50 25 Q42 25 42 20" fill="#4a5568"/>
                            
                            <!-- Khaki shirt -->
                            <rect x="42" y="33" width="16" height="20" fill="#9ca3af" rx="2"/>
                            
                            <!-- Shirt collar -->
                            <path d="M46 33 L50 36 L54 33 L54 38 L46 38 Z" fill="#6b7280"/>
                            
                            <!-- Shirt pockets -->
                            <rect x="44" y="40" width="4" height="3" fill="#6b7280" rx="0.5"/>
                            <rect x="52" y="40" width="4" height="3" fill="#6b7280" rx="0.5"/>
                            
                            <!-- Arms in khaki -->
                            <rect x="35" y="38" width="7" height="12" fill="#9ca3af" rx="3"/>
                            <rect x="58" y="38" width="7" height="12" fill="#9ca3af" rx="3"/>
                            
                            <!-- Khaki pants -->
                            <rect x="42" y="53" width="16" height="15" fill="#6b7280" rx="1"/>
                            
                            <!-- Belt -->
                            <rect x="42" y="53" width="16" height="2" fill="#4a5568"/>
                            <rect x="49" y="52" width="2" height="4" fill="#fbbf24" rx="0.5"/>
                            
                            <!-- Legs in khaki -->
                            <rect x="44" y="68" width="5" height="8" fill="#6b7280"/>
                            <rect x="51" y="68" width="5" height="8" fill="#6b7280"/>
                            
                            <!-- Black shoes -->
                            <ellipse cx="46.5" cy="78" rx="3" ry="2" fill="#1f2937"/>
                            <ellipse cx="53.5" cy="78" rx="3" ry="2" fill="#1f2937"/>
                            
                            <!-- Name badge -->
                            <rect x="45" y="38" width="5" height="2" fill="#fbbf24" rx="0.5"/>
                            <text x="47.5" y="39.5" text-anchor="middle" fill="#1f2937" font-size="1.5" font-weight="bold">ID</text>
                            
                            <!-- Document in hand -->
                            <rect x="60" y="42" width="6" height="8" fill="white" stroke="#d1d5db" stroke-width="0.5" rx="1"/>
                            <line x1="61" y1="44" x2="65" y2="44" stroke="#9ca3af" stroke-width="0.5"/>
                            <line x1="61" y1="46" x2="65" y2="46" stroke="#9ca3af" stroke-width="0.5"/>
                            <line x1="61" y1="48" x2="64" y2="48" stroke="#9ca3af" stroke-width="0.5"/>
                            
                            <!-- Rank insignia on shoulder -->
                            <rect x="36" y="40" width="3" height="1.5" fill="#fbbf24"/>
                            <rect x="61" y="40" width="3" height="1.5" fill="#fbbf24"/>
                            
                            <text x="50" y="90" text-anchor="middle" fill="white" font-size="6" font-weight="bold">TRANSFER</text>
                        </svg>
                        <div>
                            <div class="text-xl font-bold text-blue-800">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</div>
                            <div class="text-sm text-gray-600">‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</div>
                        </div>
                    </div>
                </div>
                <div class="flex space-x-6">
                    <button onclick="showPage('home')" class="nav-btn text-blue-800 hover:bg-blue-100 px-4 py-2 rounded-lg transition-colors font-medium">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
                    <button onclick="showPage('announcements')" class="nav-btn text-blue-800 hover:bg-blue-100 px-4 py-2 rounded-lg transition-colors font-medium">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    
                    <!-- Dropdown Menu for ‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£ -->
                    <div class="relative group">
                        <button class="nav-btn text-blue-800 hover:bg-blue-100 px-4 py-2 rounded-lg transition-colors font-medium flex items-center">
                            ‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£
                            <svg class="w-4 h-4 ml-1 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="absolute top-full left-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <button onclick="showPage('exam-ocsc')" class="w-full text-left px-4 py-3 text-blue-800 hover:bg-blue-50 transition-colors flex items-center">
                                    <span class="mr-3">üèõÔ∏è</span>
                                    <div>
                                        <div class="font-medium">‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.</div>
                                        <div class="text-xs text-gray-600">‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏û‡∏•‡πÄ‡∏£‡∏∑‡∏≠‡∏ô</div>
                                    </div>
                                </button>
                                <button onclick="showPage('exam-direct')" class="w-full text-left px-4 py-3 text-blue-800 hover:bg-blue-50 transition-colors flex items-center">
                                    <span class="mr-3">üìù</span>
                                    <div>
                                        <div class="font-medium">‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.</div>
                                        <div class="text-xs text-gray-600">‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</div>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="showPage('agencies')" class="nav-btn text-blue-800 hover:bg-blue-100 px-4 py-2 rounded-lg transition-colors font-medium">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</button>
                    <button onclick="showPage('post')" class="nav-btn bg-blue-600 text-white hover:bg-blue-700 px-6 py-2 rounded-lg transition-colors font-medium">+ ‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
                    

                </div>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home-page" class="page">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <!-- Hero Section -->
            <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-2xl p-8 mb-8 fade-in shadow-xl">
                <h1 class="text-4xl font-bold mb-4">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</h1>
                <p class="text-xl mb-6">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</p>
                <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
                    <button onclick="showPage('post')" class="post-btn text-white px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105">
                        üèõÔ∏è ‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢
                    </button>
                    <button onclick="showPage('announcements')" class="bg-white text-blue-800 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all transform hover:scale-105">
                        üìã ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                </div>
            </div>

            <!-- Platform Stats -->
            <div class="grid md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-blue-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üèõÔ∏è</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</h3>
                            <p class="text-3xl font-bold text-blue-700" id="total-agencies">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-blue-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üì¢</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                            <p class="text-3xl font-bold text-indigo-700" id="total-announcements">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-blue-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üÜï</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                            <p class="text-3xl font-bold text-blue-700" id="today-announcements">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-blue-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üë•</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö</h3>
                            <p class="text-3xl font-bold text-blue-700" id="total-positions">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- How It Works -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 text-center">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">üèõÔ∏è</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-3">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</h3>
                        <p class="text-gray-600 text-sm mb-4">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
                        <button onclick="showPage('post')" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors">
                            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
                        </button>
                    </div>
                    <div class="text-center">
                        <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">üë®‚Äçüíº</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-3">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</h3>
                        <p class="text-gray-600 text-sm mb-4">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
                        <button onclick="showPage('announcements')" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors">
                            ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
                        </button>
                    </div>
                    <div class="text-center">
                        <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">ü§ù</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-3">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà</h3>
                        <p class="text-gray-600 text-sm mb-4">‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</p>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors">
                            ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recent Announcements -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
                    <button onclick="showPage('announcements')" class="text-blue-700 hover:text-blue-900 font-medium">
                        ‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Üí
                    </button>
                </div>
                <div id="recent-announcements" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Announcements will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Announcements Page -->
    <div id="announcements-page" class="page hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center mb-8 space-y-4 md:space-y-0">
                <h1 class="text-3xl font-bold text-gray-800">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
                <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4">
                    <input type="text" id="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô..." class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                    <select id="position-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                        <option value="">‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</option>
                        <option value="‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£">‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£</option>
                        <option value="‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</option>
                        <option value="‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£">‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£</option>
                        <option value="‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏™‡πà‡∏ß‡∏ô">‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏™‡πà‡∏ß‡∏ô</option>
                    </select>
                    <select id="location-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                        <option value="">‡∏ó‡∏∏‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                        <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option>
                        <option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</option>
                        <option value="‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô">‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</option>
                        <option value="‡∏™‡∏á‡∏Ç‡∏•‡∏≤">‡∏™‡∏á‡∏Ç‡∏•‡∏≤</option>
                    </select>
                </div>
            </div>

            <div id="announcements-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Announcements will be populated here -->
            </div>

            <!-- Pagination -->
            <div class="flex justify-center mt-8">
                <div class="flex space-x-2" id="pagination">
                    <!-- Pagination buttons will be added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Agencies Page -->
    <div id="agencies-page" class="page hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-4">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°</h1>
                <p class="text-gray-600">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢</p>
            </div>

            <!-- Agency Stats -->
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <div class="text-4xl mb-4">üèõÔ∏è</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">45</h3>
                    <p class="text-gray-600">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <div class="text-4xl mb-4">üìç</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">76</h3>
                    <p class="text-gray-600">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <div class="text-4xl mb-4">üíº</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">1,247</h3>
                    <p class="text-gray-600">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö</p>
                </div>
            </div>

            <!-- Agency Categories -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="flex items-center mb-4">
                        <div class="bg-blue-100 p-3 rounded-full mr-4">
                            <svg width="30" height="30" viewBox="0 0 100 100" class="text-blue-600">
                                <rect x="20" y="30" width="60" height="50" fill="currentColor" rx="5"/>
                                <rect x="25" y="35" width="50" height="40" fill="white" rx="3"/>
                                <path d="M35 20 L50 10 L65 20 L65 30 L35 30 Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏°‡∏´‡∏≤‡∏î‡πÑ‡∏ó‡∏¢</h3>
                            <p class="text-sm text-gray-600">12 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">‡∏Å‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á, ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î, ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö 234 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</span>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</button>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="flex items-center mb-4">
                        <div class="bg-green-100 p-3 rounded-full mr-4">
                            <svg width="30" height="30" viewBox="0 0 100 100" class="text-green-600">
                                <circle cx="50" cy="50" r="40" fill="currentColor"/>
                                <circle cx="50" cy="50" r="30" fill="white"/>
                                <path d="M35 40 L50 25 L65 40 L60 40 L60 65 L40 65 L40 40 Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£</h3>
                            <p class="text-sm text-gray-600">8 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤, ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö 189 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</span>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</button>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-100 p-3 rounded-full mr-4">
                            <svg width="30" height="30" viewBox="0 0 100 100" class="text-purple-600">
                                <rect x="15" y="25" width="70" height="50" fill="currentColor" rx="8"/>
                                <rect x="20" y="30" width="60" height="40" fill="white" rx="5"/>
                                <circle cx="65" cy="50" r="8" fill="currentColor"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</h3>
                            <p class="text-sm text-gray-600">25 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•, ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î, ‡∏≠‡∏ö‡∏ï.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö 824 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</span>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Join Platform -->
            <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-xl p-8 text-center">
                <h2 class="text-2xl font-bold mb-4">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°?</h2>
                <p class="mb-6">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</p>
                <button onclick="showPage('post')" class="bg-white text-blue-800 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all transform hover:scale-105">
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
                </button>
            </div>
        </div>
    </div>

    <!-- Post Announcement Page -->
    <div id="post-page" class="page hidden">
        <div class="max-w-4xl mx-auto px-4 py-8">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</h1>
                
                <!-- Agency Info Section -->
                <div class="bg-gray-50 rounded-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô *</label>
                            <input type="text" id="agency-name" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô *</label>
                            <select id="agency-type" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</option>
                                <option value="‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á">‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á</option>
                                <option value="‡∏Å‡∏£‡∏°">‡∏Å‡∏£‡∏°</option>
                                <option value="‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                                <option value="‡πÄ‡∏Ç‡∏ï">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï</option>
                                <option value="‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•">‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•</option>
                                <option value="‡∏≠‡∏ö‡∏à">‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                                <option value="‡∏≠‡∏ö‡∏ï">‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏≥‡∏ö‡∏•</option>
                                <option value="‡∏£‡∏±‡∏ê‡∏ß‡∏¥‡∏™‡∏≤‡∏´‡∏Å‡∏¥‡∏à">‡∏£‡∏±‡∏ê‡∏ß‡∏¥‡∏™‡∏≤‡∏´‡∏Å‡∏¥‡∏à</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î *</label>
                            <select id="agency-province" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                                <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option>
                                <option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</option>
                                <option value="‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô">‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</option>
                                <option value="‡∏™‡∏á‡∏Ç‡∏•‡∏≤">‡∏™‡∏á‡∏Ç‡∏•‡∏≤</option>
                                <option value="‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤">‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤</option>
                                <option value="‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ">‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ *</label>
                            <input type="text" id="contact-person" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
                            <input type="tel" id="contact-phone" placeholder="0X-XXXX-XXXX" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                            <input type="email" id="contact-email" placeholder="contact@agency.go.th" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Position Details Section -->
                <div class="bg-blue-50 rounded-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á *</label>
                            <input type="text" id="position-title" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á *</label>
                            <select id="position-level" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</option>
                                <option value="‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£">‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£</option>
                                <option value="‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£">‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£</option>
                                <option value="‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©">‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©</option>
                                <option value="‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç">‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç</option>
                                <option value="‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£">‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö *</label>
                            <input type="number" id="position-count" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô" min="1" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</label>
                            <input type="text" id="salary-range" placeholder="‡πÄ‡∏ä‡πà‡∏ô 25,000 - 35,000 ‡∏ö‡∏≤‡∏ó" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ *</label>
                        <textarea id="position-requirements" rows="4" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö *</label>
                        <textarea id="position-responsibilities" rows="4" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                </div>

                <!-- Application Details Section -->
                <div class="bg-green-50 rounded-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ *</label>
                            <input type="date" id="application-start" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ *</label>
                            <input type="date" id="application-end" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</label>
                            <input type="date" id="start-work-date" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£ *</label>
                            <select id="application-method" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</option>
                                <option value="online">‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</option>
                                <option value="mail">‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå</option>
                                <option value="inperson">‡∏¢‡∏∑‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á</option>
                                <option value="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</label>
                        <textarea id="required-documents" rows="3" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
                        <textarea id="additional-info" rows="3" placeholder="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏ß‡∏£‡∏ó‡∏£‡∏≤‡∏ö" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                </div>

                <!-- Submit Buttons -->
                <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
                    <button onclick="publishAnnouncement()" class="flex-1 post-btn text-white py-4 rounded-lg font-semibold text-lg transition-all transform hover:scale-105">
                        üöÄ ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
                    </button>
                    <button onclick="saveDraft()" class="flex-1 bg-gray-600 text-white py-4 rounded-lg font-semibold text-lg hover:bg-gray-700 transition-colors">
                        üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡πà‡∏≤‡∏á
                    </button>
                    <button onclick="previewAnnouncement()" class="flex-1 bg-blue-600 text-white py-4 rounded-lg font-semibold text-lg hover:bg-blue-700 transition-colors">
                        üëÅÔ∏è ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Exam OCSC Page (‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.) -->
    <div id="exam-ocsc-page" class="page hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <!-- Header -->
            <div class="bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-2xl p-8 mb-8 fade-in shadow-xl">
                <h1 class="text-4xl font-bold mb-4">‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.</h1>
                <p class="text-xl mb-6">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏û‡∏•‡πÄ‡∏£‡∏∑‡∏≠‡∏ô (‡∏Å‡∏û.)</p>
                <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
                    <button onclick="showPage('post')" class="bg-white text-purple-800 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all transform hover:scale-105">
                        üèõÔ∏è ‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏™‡∏≠‡∏ö ‡∏Å‡∏û.
                    </button>
                    <button class="bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-800 transition-all transform hover:scale-105">
                        üìö ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö
                    </button>
                </div>
            </div>

            <!-- OCSC Exam Stats -->
            <div class="grid md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-purple-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üèõÔ∏è</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö</h3>
                            <p class="text-3xl font-bold text-purple-700" id="ocsc-total-positions">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-purple-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üìù</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
                            <p class="text-3xl font-bold text-green-700" id="ocsc-active-exams">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-purple-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üë•</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                            <p class="text-3xl font-bold text-blue-700" id="ocsc-total-applicants">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-purple-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üéØ</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</h3>
                            <p class="text-3xl font-bold text-red-700" id="ocsc-competition-rate">1:0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exam Categories -->
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-100 p-3 rounded-full mr-4">
                            <span class="text-2xl">üë®‚Äçüíº</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£</h3>
                            <p class="text-sm text-gray-600">‡∏õ.‡∏ï‡∏£‡∏µ ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏à‡∏ö‡πÉ‡∏´‡∏°‡πà</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö 45 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</span>
                        <button class="text-purple-600 hover:text-purple-800 text-sm font-medium">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</button>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-100 p-3 rounded-full mr-4">
                            <span class="text-2xl">üéì</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£</h3>
                            <p class="text-sm text-gray-600">‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå 3-5 ‡∏õ‡∏µ</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö 28 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</span>
                        <button class="text-purple-600 hover:text-purple-800 text-sm font-medium">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</button>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-100 p-3 rounded-full mr-4">
                            <span class="text-2xl">üëë</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£</h3>
                            <p class="text-sm text-gray-600">‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå 8+ ‡∏õ‡∏µ</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö 12 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</span>
                        <button class="text-purple-600 hover:text-purple-800 text-sm font-medium">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Current OCSC Exams -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h2>
                    <div class="flex space-x-4">
                        <select id="ocsc-level-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö</option>
                            <option value="‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£">‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£</option>
                            <option value="‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£">‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£</option>
                            <option value="‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£">‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£</option>
                        </select>
                        <input type="text" id="ocsc-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á..." class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                </div>
                <div id="ocsc-exams-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- OCSC exams will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Exam Direct Page (‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.) -->
    <div id="exam-direct-page" class="page hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <!-- Header -->
            <div class="bg-gradient-to-r from-green-600 to-green-800 text-white rounded-2xl p-8 mb-8 fade-in shadow-xl">
                <h1 class="text-4xl font-bold mb-4">‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.</h1>
                <p class="text-xl mb-6">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏û‡∏•‡πÄ‡∏£‡∏∑‡∏≠‡∏ô</p>
                <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
                    <button onclick="showPage('post')" class="bg-white text-green-800 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all transform hover:scale-105">
                        üìù ‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏™‡∏≠‡∏ö‡∏ï‡∏£‡∏á
                    </button>
                    <button class="bg-green-700 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-800 transition-all transform hover:scale-105">
                        üìã ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                </div>
            </div>

            <!-- Direct Exam Stats -->
            <div class="grid md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-green-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üè¢</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö</h3>
                            <p class="text-3xl font-bold text-green-700" id="direct-total-agencies">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-green-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üìù</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö</h3>
                            <p class="text-3xl font-bold text-blue-700" id="direct-total-positions">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-green-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">‚è∞</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
                            <p class="text-3xl font-bold text-orange-700" id="direct-active-exams">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg fade-in border-l-4 border-green-600">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">üë•</div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                            <p class="text-3xl font-bold text-purple-700" id="direct-total-applicants">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agency Types -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="text-center">
                        <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">üèõÔ∏è</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-2">‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</h3>
                        <p class="text-sm text-gray-600 mb-3">‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏• ‡∏≠‡∏ö‡∏à. ‡∏≠‡∏ö‡∏ï.</p>
                        <div class="text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö 156 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="text-center">
                        <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">üè•</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-2">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</h3>
                        <p class="text-sm text-gray-600 mb-3">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏£‡∏±‡∏ê</p>
                        <div class="text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö 89 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="text-center">
                        <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">üéì</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-2">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h3>
                        <p class="text-sm text-gray-600 mb-3">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢ ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</p>
                        <div class="text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö 67 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all">
                    <div class="text-center">
                        <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">üè≠</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-2">‡∏£‡∏±‡∏ê‡∏ß‡∏¥‡∏™‡∏≤‡∏´‡∏Å‡∏¥‡∏à</h3>
                        <p class="text-sm text-gray-600 mb-3">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏£‡∏±‡∏ê ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏°‡∏´‡∏≤‡∏ä‡∏ô</p>
                        <div class="text-green-600 font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ö 43 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</div>
                    </div>
                </div>
            </div>

            <!-- Current Direct Exams -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h2>
                    <div class="flex space-x-4">
                        <select id="direct-agency-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</option>
                            <option value="‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•">‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•</option>
                            <option value="‡∏≠‡∏ö‡∏à">‡∏≠‡∏ö‡∏à.</option>
                            <option value="‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</option>
                            <option value="‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</option>
                        </select>
                        <input type="text" id="direct-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á..." class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                </div>
                <div id="direct-exams-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Direct exams will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Page -->
    <div id="admin-login-page" class="page hidden">
        <div class="max-w-md mx-auto px-4 py-16">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="text-center mb-8">
                    <div class="bg-red-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-4xl">üîê</span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h1>
                    <p class="text-gray-600">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
                </div>

                <form id="admin-login-form" onsubmit="adminLogin(event)" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                        <input type="email" id="admin-email-input" required 
                               placeholder="admin@example.com"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="admin-password-input" required 
                               placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                    </div>

                    <div class="flex items-center">
                        <input type="checkbox" id="remember-me" class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded">
                        <label for="remember-me" class="ml-2 block text-sm text-gray-700">‡∏à‡∏î‡∏à‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</label>
                    </div>

                    <button type="submit" id="login-submit-btn" 
                            class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors">
                        üîì ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </form>

                <div class="mt-6 text-center">
                    <button onclick="showPage('home')" class="text-gray-600 hover:text-gray-800 text-sm">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                </div>


            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="page hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800">üîß ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h1>
                        <p class="text-gray-600 mt-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°</p>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞</div>
                        <div class="font-semibold text-red-600" id="admin-display-email">üë®‚Äçüíº ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</div>
                        <div class="text-xs text-gray-400" id="admin-login-time"></div>
                    </div>
                </div>

                <!-- Admin Stats -->
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                                <p class="text-3xl font-bold" id="admin-total-announcements">0</p>
                            </div>
                            <div class="text-4xl opacity-80">üì¢</div>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà</h3>
                                <p class="text-3xl font-bold" id="admin-published-announcements">0</p>
                            </div>
                            <div class="text-4xl opacity-80">‚úÖ</div>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold">‡∏£‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h3>
                                <p class="text-3xl font-bold" id="admin-draft-announcements">0</p>
                            </div>
                            <div class="text-4xl opacity-80">üìù</div>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold">‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                                <p class="text-3xl font-bold" id="admin-total-applications">0</p>
                            </div>
                            <div class="text-4xl opacity-80">üë•</div>
                        </div>
                    </div>
                </div>

                <!-- Admin Actions -->
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <button onclick="exportData()" class="bg-gradient-to-r from-indigo-500 to-indigo-600 text-white p-6 rounded-xl hover:from-indigo-600 hover:to-indigo-700 transition-all transform hover:scale-105">
                        <div class="text-3xl mb-2">üìä</div>
                        <h3 class="text-lg font-semibold mb-2">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                        <p class="text-sm opacity-90">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</p>
                    </button>
                    <button onclick="clearOldAnnouncements()" class="bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all transform hover:scale-105">
                        <div class="text-3xl mb-2">üßπ</div>
                        <h3 class="text-lg font-semibold mb-2">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤</h3>
                        <p class="text-sm opacity-90">‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß</p>
                    </button>
                    <button onclick="sendNotifications()" class="bg-gradient-to-r from-pink-500 to-pink-600 text-white p-6 rounded-xl hover:from-pink-600 hover:to-pink-700 transition-all transform hover:scale-105">
                        <div class="text-3xl mb-2">üìß</div>
                        <h3 class="text-lg font-semibold mb-2">‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
                        <p class="text-sm opacity-90">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>
                    </button>
                </div>

                <!-- Announcements Management -->
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h2>
                        <div class="flex space-x-4">
                            <select id="admin-status-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                                <option value="">‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
                                <option value="published">‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÅ‡∏•‡πâ‡∏ß</option>
                                <option value="draft">‡∏£‡πà‡∏≤‡∏á</option>
                                <option value="expired">‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏</option>
                            </select>
                            <input type="text" id="admin-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®..." class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        </div>
                    </div>

                    <div id="admin-announcements-list" class="space-y-4">
                        <!-- Admin announcements will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-bold mb-4">‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢</h3>
                    <p class="text-gray-300 text-sm">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="showPage('home')" class="text-gray-300 hover:text-white transition-colors">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
                        <li><a href="#" onclick="showPage('announcements')" class="text-gray-300 hover:text-white transition-colors">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a></li>
                        <li><a href="#" onclick="showPage('exam-ocsc')" class="text-gray-300 hover:text-white transition-colors">‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.</a></li>
                        <li><a href="#" onclick="showPage('exam-direct')" class="text-gray-300 hover:text-white transition-colors">‡∏™‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.</a></li>
                        <li><a href="#" onclick="showPage('agencies')" class="text-gray-300 hover:text-white transition-colors">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</a></li>
                        <li><a href="#" onclick="showPage('post')" class="text-gray-300 hover:text-white transition-colors">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="text-gray-300 hover:text-white transition-colors">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white transition-colors">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white transition-colors">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white transition-colors">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="text-gray-300 hover:text-white transition-colors">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white transition-colors">‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white transition-colors">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</a></li>
                        <li class="pt-2">
                            <button onclick="showAdminLogin()" class="admin-btn text-white px-4 py-2 rounded-lg text-sm font-medium transition-all transform hover:scale-105 w-full">
                                üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-400 text-sm">¬© 2024 ‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£. ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå.</p>
            </div>
        </div>
    </footer>

    <!-- Application Modal -->
    <div id="application-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 transform transition-all">
            <h3 class="text-2xl font-bold mb-4 text-gray-800">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢</h3>
            <p class="text-gray-600 mb-6" id="modal-announcement-title"></p>
            <div class="space-y-4">
                <input type="text" id="applicant-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                <input type="text" id="applicant-current-position" placeholder="‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                <input type="text" id="applicant-current-agency" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                <input type="email" id="applicant-email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                <input type="tel" id="applicant-phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                <textarea id="applicant-reason" placeholder="‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
            </div>
            <div class="flex space-x-4 mt-6">
                <button onclick="submitApplication()" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors">
                    ‡∏™‡πà‡∏á‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£
                </button>
                <button onclick="closeModal()" class="flex-1 bg-gray-600 text-white py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let announcementsDatabase = [];
        let currentPage = 'home';
        let currentAnnouncementPage = 1;
        let currentAnnouncementId = null;
        let editingAnnouncementId = null;
        let currentUser = null;
        let isAdminLoggedIn = false;
        const announcementsPerPage = 6;

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            initializeAuth();
            showPage('home');
            setTodayDate();
        });

        function initializeApp() {
            console.log('üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢...');
            
            // Load data from Firebase
            loadDataFromFirebase();
            
            // Initialize demo data if database is empty
            initializeDemoData();
        }

        function initializeAuth() {
            const { auth, onAuthStateChanged } = window.firebase;
            
            // Monitor authentication state
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    console.log('‚úÖ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö:', user.email);
                    currentUser = user;
                    isAdminLoggedIn = true;
                    updateAuthUI(true, user.email);
                    
                    // Create demo admin account if needed
                    createDemoAdminIfNeeded();
                } else {
                    console.log('‚ùå ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö');
                    currentUser = null;
                    isAdminLoggedIn = false;
                    updateAuthUI(false);
                    
                    // Redirect to home if on admin page
                    if (currentPage === 'admin') {
                        showPage('home');
                    }
                }
            });
        }

        function updateAuthUI(isLoggedIn, email = '') {
            const loginBtn = document.getElementById('admin-login-btn');
            const userInfo = document.getElementById('admin-user-info');
            const adminEmailSpan = document.getElementById('admin-email');
            const adminDisplayEmail = document.getElementById('admin-display-email');
            const adminLoginTime = document.getElementById('admin-login-time');
            
            if (isLoggedIn) {
                loginBtn.classList.add('hidden');
                userInfo.classList.remove('hidden');
                adminEmailSpan.textContent = email;
                adminDisplayEmail.textContent = `üë®‚Äçüíº ${email}`;
                adminLoginTime.textContent = `‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö: ${new Date().toLocaleString('th-TH')}`;
            } else {
                loginBtn.classList.remove('hidden');
                userInfo.classList.add('hidden');
                adminEmailSpan.textContent = '';
                adminDisplayEmail.textContent = 'üë®‚Äçüíº ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
                adminLoginTime.textContent = '';
            }
        }

        function createDemoAdminIfNeeded() {
            // This would typically be done server-side
            // For demo purposes, we'll just log that the admin exists
            console.log('üîß ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏î‡πÇ‡∏°...');
        }

        function showAdminLogin() {
            showPage('admin-login');
        }



        async function adminLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('admin-email-input').value;
            const password = document.getElementById('admin-password-input').value;
            const submitBtn = document.getElementById('login-submit-btn');
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...';
            
            try {
                const { auth, signInWithEmailAndPassword, createUserWithEmailAndPassword } = window.firebase;
                
                // Try to sign in first
                try {
                    const userCredential = await signInWithEmailAndPassword(auth, email, password);
                    console.log('‚úÖ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', userCredential.user.email);
                    alert('üéâ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                    showPage('admin');
                } catch (signInError) {
                    // If sign in fails and it's the demo account, create it
                    if (email === 'admin@demo.com' && password === 'admin123') {
                        console.log('üîß ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏î‡πÇ‡∏°...');
                        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                        console.log('‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏î‡πÇ‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', userCredential.user.email);
                        alert('üéâ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏î‡πÇ‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                        showPage('admin');
                    } else {
                        throw signInError;
                    }
                }
            } catch (error) {
                console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö:', error);
                
                let errorMessage = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
                switch (error.code) {
                    case 'auth/user-not-found':
                        errorMessage = '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage = '‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà';
                        break;
                    case 'auth/network-request-failed':
                        errorMessage = '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡πÑ‡∏î‡πâ';
                        break;
                }
                
                alert('‚ùå ' + errorMessage);
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'üîì ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
            }
        }

        async function adminLogout() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                try {
                    const { auth, signOut } = window.firebase;
                    await signOut(auth);
                    console.log('‚úÖ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    alert('üëã ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                    showPage('home');
                } catch (error) {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö');
                }
            }
        }

        function loadDataFromFirebase() {
            const { database, ref, onValue } = window.firebase;
            const announcementsRef = ref(database, 'announcements');
            
            onValue(announcementsRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    announcementsDatabase = Object.keys(data).map(key => ({
                        id: key,
                        ...data[key]
                    }));
                    console.log('‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', announcementsDatabase.length, '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
                } else {
                    announcementsDatabase = [];
                    console.log('üìù ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Firebase - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡πà‡∏≤‡∏á');
                }
                
                // Update displays
                updateStats();
                displayRecentAnnouncements();
                updateAdminStats();
                
                if (currentPage === 'announcements') {
                    displayAnnouncements();
                } else if (currentPage === 'admin') {
                    displayAdminAnnouncements();
                }
            }, (error) => {
                console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:', error);
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            });
        }

        function initializeDemoData() {
            const { database, ref, get, set } = window.firebase;
            const announcementsRef = ref(database, 'announcements');
            
            get(announcementsRef).then((snapshot) => {
                if (!snapshot.exists()) {
                    console.log('üîß ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á...');
                    const demoData = {
                        'ann_001': {
                            agencyName: "‡∏Å‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á",
                            agencyType: "‡∏Å‡∏£‡∏°",
                            province: "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£",
                            contactPerson: "‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
                            contactPhone: "02-123-4567",
                            contactEmail: "somchai@dopa.go.th",
                            positionTitle: "‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£",
                            positionLevel: "‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£",
                            positionCount: 3,
                            salaryRange: "25,000 - 35,000 ‡∏ö‡∏≤‡∏ó",
                            requirements: "‡∏ß‡∏∏‡∏í‡∏¥‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 3 ‡∏õ‡∏µ",
                            responsibilities: "‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£ ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ",
                            applicationStart: "2024-01-20",
                            applicationEnd: "2024-02-15",
                            startWorkDate: "2024-03-01",
                            applicationMethod: "online",
                            requiredDocuments: "‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô, ‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô, ‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤, ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô",
                            additionalInfo: "‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 15 ‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£",
                            status: "published",
                            applications: 12,
                            views: 156,
                            publishDate: "2024-01-15",
                            createdAt: Date.now()
                        },
                        'ann_002': {
                            agencyName: "‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•‡∏ô‡∏Ñ‡∏£‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà",
                            agencyType: "‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•",
                            province: "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà",
                            contactPerson: "‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°",
                            contactPhone: "053-123-456",
                            contactEmail: "malee@chiangmai.go.th",
                            positionTitle: "‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô",
                            positionLevel: "‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£",
                            positionCount: 2,
                            salaryRange: "18,000 - 25,000 ‡∏ö‡∏≤‡∏ó",
                            requirements: "‡∏ß‡∏∏‡∏í‡∏¥‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ ‡∏™‡∏≤‡∏Ç‡∏≤‡∏£‡∏±‡∏ê‡∏õ‡∏£‡∏∞‡∏®‡∏≤‡∏™‡∏ô‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á",
                            responsibilities: "‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢ ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•",
                            applicationStart: "2024-01-25",
                            applicationEnd: "2024-02-20",
                            startWorkDate: "2024-03-15",
                            applicationMethod: "inperson",
                            requiredDocuments: "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô, ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô, ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á",
                            additionalInfo: "‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏Å‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà",
                            status: "published",
                            applications: 8,
                            views: 89,
                            publishDate: "2024-01-20",
                            createdAt: Date.now() - 86400000
                        },
                        'ann_003': {
                            agencyName: "‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å",
                            agencyType: "‡πÄ‡∏Ç‡∏ï",
                            province: "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£",
                            contactPerson: "‡∏ô‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏ó‡∏ò ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á",
                            contactPhone: "02-234-5678",
                            contactEmail: "prayuth@bangrak.go.th",
                            positionTitle: "‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô",
                            positionLevel: "‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£",
                            positionCount: 1,
                            salaryRange: "45,000 - 55,000 ‡∏ö‡∏≤‡∏ó",
                            requirements: "‡∏ß‡∏∏‡∏í‡∏¥‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÇ‡∏ó‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 5 ‡∏õ‡∏µ",
                            responsibilities: "‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô",
                            applicationStart: "2024-02-01",
                            applicationEnd: "2024-02-28",
                            startWorkDate: "2024-04-01",
                            applicationMethod: "email",
                            requiredDocuments: "‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£, ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß, ‡∏ú‡∏•‡∏á‡∏≤‡∏ô, ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå",
                            additionalInfo: "‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ",
                            status: "published",
                            applications: 5,
                            views: 234,
                            publishDate: "2024-01-28",
                            createdAt: Date.now() - 172800000
                        },
                        'draft_001': {
                            agencyName: "‡∏Å‡∏£‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô",
                            agencyType: "‡∏Å‡∏£‡∏°",
                            province: "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£",
                            contactPerson: "‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå ‡∏î‡∏µ‡∏á‡∏≤‡∏°",
                            contactPhone: "02-345-6789",
                            contactEmail: "somsak@ldd.go.th",
                            positionTitle: "‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô",
                            positionLevel: "‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£",
                            positionCount: 2,
                            salaryRange: "20,000 - 28,000 ‡∏ö‡∏≤‡∏ó",
                            requirements: "‡∏ß‡∏∏‡∏í‡∏¥‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô",
                            responsibilities: "‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô ‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏ß‡∏à ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå",
                            applicationStart: "2024-02-10",
                            applicationEnd: "2024-03-10",
                            startWorkDate: "2024-04-01",
                            applicationMethod: "online",
                            requiredDocuments: "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥",
                            additionalInfo: "‡∏£‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® - ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà",
                            status: "draft",
                            applications: 0,
                            views: 0,
                            publishDate: null,
                            createdAt: Date.now() - 259200000
                        }
                    };
                    
                    set(announcementsRef, demoData).then(() => {
                        console.log('‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    }).catch((error) => {
                        console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:', error);
                    });
                }
            });
        }

        function showPage(page) {
            // Check admin access
            if (page === 'admin' && !isAdminLoggedIn) {
                alert('üîí ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
                showAdminLogin();
                return;
            }
            
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(page + '-page').classList.remove('hidden');
            document.getElementById(page + '-page').classList.add('fade-in');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-green-100', 'bg-green-600', 'text-white');
                if (!btn.textContent.includes('+')) {
                    btn.classList.add('text-green-800');
                }
            });
            
            if (event?.target) {
                if (event.target.textContent.includes('+')) {
                    event.target.classList.add('bg-green-600', 'text-white');
                } else {
                    event.target.classList.add('bg-green-100');
                }
            }
            
            currentPage = page;
            
            if (page === 'announcements') {
                displayAnnouncements();
            } else if (page === 'admin') {
                displayAdminAnnouncements();
                updateAdminStats();
            } else if (page === 'exam-ocsc') {
                displayOCSCExams();
                updateOCSCStats();
            } else if (page === 'exam-direct') {
                displayDirectExams();
                updateDirectStats();
            }
        }

        function displayOCSCExams() {
            // Filter announcements for OCSC exams (through ‡∏Å‡∏û.)
            const ocscExams = announcementsDatabase.filter(ann => 
                ann.status === 'published' && 
                (ann.examType === 'ocsc' || ann.agencyType === '‡∏Å‡∏£‡∏°' || ann.agencyType === '‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á')
            );
            
            const container = document.getElementById('ocsc-exams-list');
            if (ocscExams.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-6xl mb-4">üìù</div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
                        <p class="text-gray-600">‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û. ‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</p>
                    </div>
                `;
            } else {
                container.innerHTML = ocscExams.map(exam => createExamCard(exam, 'ocsc')).join('');
            }
        }

        function displayDirectExams() {
            // Filter announcements for direct exams (not through ‡∏Å‡∏û.)
            const directExams = announcementsDatabase.filter(ann => 
                ann.status === 'published' && 
                (ann.examType === 'direct' || ann.agencyType === '‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•' || ann.agencyType === '‡∏≠‡∏ö‡∏à' || ann.agencyType === '‡∏≠‡∏ö‡∏ï')
            );
            
            const container = document.getElementById('direct-exams-list');
            if (directExams.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-6xl mb-4">üè¢</div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
                        <p class="text-gray-600">‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</p>
                    </div>
                `;
            } else {
                container.innerHTML = directExams.map(exam => createExamCard(exam, 'direct')).join('');
            }
        }

        function createExamCard(exam, type) {
            const today = new Date();
            const endDate = new Date(exam.applicationEnd);
            const isExpired = today > endDate;
            const daysLeft = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));
            
            const typeColor = type === 'ocsc' ? 'purple' : 'green';
            const typeIcon = type === 'ocsc' ? 'üèõÔ∏è' : 'üè¢';
            const typeText = type === 'ocsc' ? '‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.' : '‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏û.';
            
            return `
                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all border-l-4 border-${typeColor}-500">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex flex-col space-y-1">
                            <span class="bg-${typeColor}-100 text-${typeColor}-800 px-3 py-1 rounded-full text-sm font-medium flex items-center w-fit">
                                ${typeIcon} ${typeText}
                            </span>
                            <span class="text-xs text-gray-600">üèõÔ∏è ${exam.agencyName}</span>
                            <span class="text-xs text-gray-600">üìç ${exam.province}</span>
                        </div>
                        <div class="text-right">
                            <span class="text-sm text-${typeColor}-700 font-medium">‡∏£‡∏±‡∏ö ${exam.positionCount} ‡∏Ñ‡∏ô</span>
                            <div class="text-xs text-gray-500">üìù ${exam.applications || 0} ‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</div>
                            <div class="text-xs text-gray-500 flex items-center justify-end mt-1">
                                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                                </svg>
                                ${exam.views || 0} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                            </div>
                        </div>
                    </div>
                    
                    <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${exam.positionTitle}</h3>
                    
                    <div class="text-sm text-gray-600 mb-3">
                        <div class="flex items-center mb-1">
                            <span class="mr-2">üí∞</span>
                            <span>${exam.salaryRange || '‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®'}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="mr-2">üìû</span>
                            <span>${exam.contactPerson}</span>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 mb-4 line-clamp-3">${exam.requirements}</p>
                    
                    <div class="border-t pt-4">
                        <div class="flex items-center justify-between mb-3">
                            <div class="text-sm text-gray-600">
                                <div class="flex items-center mb-1">
                                    <span class="mr-2">üìÖ</span>
                                    <span>‡πÄ‡∏£‡∏¥‡πà‡∏°: ${formatDate(exam.applicationStart)}</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="mr-2">‚è∞</span>
                                    <span>‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î: ${formatDate(exam.applicationEnd)}</span>
                                </div>
                            </div>
                            <div class="text-right">
                                ${!isExpired ? 
                                    `<div class="text-sm font-medium ${daysLeft <= 7 ? 'text-red-600' : 'text-green-700'}">
                                        ${daysLeft > 0 ? `‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${daysLeft} ‡∏ß‡∏±‡∏ô` : '‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'}
                                    </div>` :
                                    `<div class="text-sm font-medium text-gray-500">‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡∏ï‡πÅ‡∏•‡πâ‡∏ß</div>`
                                }
                            </div>
                        </div>
                        
                        <button 
                            onclick="openApplicationModal('${exam.id}')" 
                            class="w-full bg-${typeColor}-600 text-white py-3 rounded-lg font-semibold hover:bg-${typeColor}-700 transition-colors ${isExpired ? 'bg-gray-400 cursor-not-allowed' : ''}"
                            ${isExpired ? 'disabled' : ''}
                        >
                            ${isExpired ? 'üîí ‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡∏ï‡∏™‡∏°‡∏±‡∏Ñ‡∏£' : '‚úçÔ∏è ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≠‡∏ö'}
                        </button>
                    </div>
                </div>
            `;
        }

        function updateOCSCStats() {
            const ocscExams = announcementsDatabase.filter(ann => 
                ann.status === 'published' && 
                (ann.examType === 'ocsc' || ann.agencyType === '‡∏Å‡∏£‡∏°' || ann.agencyType === '‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á')
            );
            
            const today = new Date();
            const activeExams = ocscExams.filter(exam => {
                const endDate = new Date(exam.applicationEnd);
                return endDate >= today;
            });
            
            const totalPositions = ocscExams.reduce((sum, exam) => sum + (exam.positionCount || 0), 0);
            const totalApplicants = ocscExams.reduce((sum, exam) => sum + (exam.applications || 0), 0);
            const competitionRate = totalPositions > 0 ? Math.round(totalApplicants / totalPositions) : 0;
            
            document.getElementById('ocsc-total-positions').textContent = totalPositions;
            document.getElementById('ocsc-active-exams').textContent = activeExams.length;
            document.getElementById('ocsc-total-applicants').textContent = totalApplicants;
            document.getElementById('ocsc-competition-rate').textContent = `1:${competitionRate}`;
        }

        function updateDirectStats() {
            const directExams = announcementsDatabase.filter(ann => 
                ann.status === 'published' && 
                (ann.examType === 'direct' || ann.agencyType === '‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•' || ann.agencyType === '‡∏≠‡∏ö‡∏à' || ann.agencyType === '‡∏≠‡∏ö‡∏ï')
            );
            
            const today = new Date();
            const activeExams = directExams.filter(exam => {
                const endDate = new Date(exam.applicationEnd);
                return endDate >= today;
            });
            
            const uniqueAgencies = [...new Set(directExams.map(exam => exam.agencyName))].length;
            const totalPositions = directExams.reduce((sum, exam) => sum + (exam.positionCount || 0), 0);
            const totalApplicants = directExams.reduce((sum, exam) => sum + (exam.applications || 0), 0);
            
            document.getElementById('direct-total-agencies').textContent = uniqueAgencies;
            document.getElementById('direct-total-positions').textContent = totalPositions;
            document.getElementById('direct-active-exams').textContent = activeExams.length;
            document.getElementById('direct-total-applicants').textContent = totalApplicants;
        }

        function updateStats() {
            const totalAnnouncements = announcementsDatabase.filter(ann => ann.status === 'published').length;
            const today = new Date().toISOString().split('T')[0];
            const todayAnnouncements = announcementsDatabase.filter(ann => 
                ann.publishDate === today && ann.status === 'published'
            ).length;
            
            const uniqueAgencies = [...new Set(announcementsDatabase.map(ann => ann.agencyName))].length;
            const totalPositions = announcementsDatabase.reduce((sum, ann) => sum + (ann.positionCount || 0), 0);
            
            document.getElementById('total-agencies').textContent = uniqueAgencies;
            document.getElementById('total-announcements').textContent = totalAnnouncements;
            document.getElementById('today-announcements').textContent = todayAnnouncements;
            document.getElementById('total-positions').textContent = totalPositions;
        }

        function updateAdminStats() {
            const totalAnnouncements = announcementsDatabase.length;
            const publishedAnnouncements = announcementsDatabase.filter(ann => ann.status === 'published').length;
            const draftAnnouncements = announcementsDatabase.filter(ann => ann.status === 'draft').length;
            const totalApplications = announcementsDatabase.reduce((sum, ann) => sum + (ann.applications || 0), 0);
            
            document.getElementById('admin-total-announcements').textContent = totalAnnouncements;
            document.getElementById('admin-published-announcements').textContent = publishedAnnouncements;
            document.getElementById('admin-draft-announcements').textContent = draftAnnouncements;
            document.getElementById('admin-total-applications').textContent = totalApplications;
        }

        function displayRecentAnnouncements() {
            const recentAnnouncements = announcementsDatabase
                .filter(ann => ann.status === 'published')
                .sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate))
                .slice(0, 3);
            
            const container = document.getElementById('recent-announcements');
            container.innerHTML = recentAnnouncements.map(ann => createAnnouncementCard(ann, true)).join('');
        }

        function displayAnnouncements() {
            const searchTerm = document.getElementById('search-input')?.value.toLowerCase() || '';
            const positionFilter = document.getElementById('position-filter')?.value || '';
            const locationFilter = document.getElementById('location-filter')?.value || '';
            
            let filteredAnnouncements = announcementsDatabase.filter(ann => 
                ann.status === 'published' &&
                (ann.positionTitle.toLowerCase().includes(searchTerm) || 
                 ann.agencyName.toLowerCase().includes(searchTerm) ||
                 ann.requirements.toLowerCase().includes(searchTerm)) &&
                (positionFilter === '' || ann.positionTitle.includes(positionFilter)) &&
                (locationFilter === '' || ann.province === locationFilter)
            );
            
            const startIndex = (currentAnnouncementPage - 1) * announcementsPerPage;
            const endIndex = startIndex + announcementsPerPage;
            const paginatedAnnouncements = filteredAnnouncements.slice(startIndex, endIndex);
            
            const container = document.getElementById('announcements-list');
            container.innerHTML = paginatedAnnouncements.map(ann => createAnnouncementCard(ann, false)).join('');
            
            displayPagination(filteredAnnouncements.length);
        }

        function displayAdminAnnouncements() {
            const statusFilter = document.getElementById('admin-status-filter')?.value || '';
            const searchTerm = document.getElementById('admin-search')?.value.toLowerCase() || '';
            
            let filteredAnnouncements = announcementsDatabase.filter(ann => 
                (statusFilter === '' || ann.status === statusFilter) &&
                (ann.positionTitle.toLowerCase().includes(searchTerm) || 
                 ann.agencyName.toLowerCase().includes(searchTerm))
            );
            
            const container = document.getElementById('admin-announcements-list');
            container.innerHTML = filteredAnnouncements.map(ann => createAdminAnnouncementCard(ann)).join('');
        }

        function createAdminAnnouncementCard(announcement) {
            const statusColors = {
                'published': 'bg-green-100 text-green-800',
                'draft': 'bg-yellow-100 text-yellow-800',
                'expired': 'bg-red-100 text-red-800'
            };
            
            const statusTexts = {
                'published': '‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÅ‡∏•‡πâ‡∏ß',
                'draft': '‡∏£‡πà‡∏≤‡∏á',
                'expired': '‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏'
            };
            
            return `
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 ${announcement.status === 'published' ? 'border-green-500' : announcement.status === 'draft' ? 'border-yellow-500' : 'border-red-500'}">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1">
                            <div class="flex items-center space-x-3 mb-2">
                                <h3 class="text-lg font-bold text-gray-800">${announcement.positionTitle}</h3>
                                <span class="px-3 py-1 rounded-full text-sm font-medium ${statusColors[announcement.status] || 'bg-gray-100 text-gray-800'}">
                                    ${statusTexts[announcement.status] || announcement.status}
                                </span>
                            </div>
                            <p class="text-gray-600 mb-2">üèõÔ∏è ${announcement.agencyName} | üìç ${announcement.province}</p>
                            <p class="text-sm text-gray-500">‡∏£‡∏±‡∏ö ${announcement.positionCount} ‡∏Ñ‡∏ô | ‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ ${announcement.applications || 0} ‡πÉ‡∏ö | 
                                <svg class="w-3 h-3 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                                </svg>
                                ${announcement.views || 0} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                            </p>
                            ${announcement.publishDate ? `<p class="text-xs text-gray-400 mt-1">‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà: ${formatDate(announcement.publishDate)}</p>` : ''}
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <button onclick="editAnnouncement('${announcement.id}')" class="edit-btn text-white px-4 py-2 rounded-lg text-sm font-medium transition-all transform hover:scale-105">
                                ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                            </button>
                            <button onclick="deleteAnnouncement('${announcement.id}')" class="delete-btn text-white px-4 py-2 rounded-lg text-sm font-medium transition-all transform hover:scale-105">
                                üóëÔ∏è ‡∏•‡∏ö
                            </button>
                            ${announcement.status === 'draft' ? 
                                `<button onclick="publishFromAdmin('${announcement.id}')" class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors">
                                    üöÄ ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà
                                </button>` : ''
                            }
                        </div>
                    </div>
                    <div class="text-sm text-gray-600">
                        <p class="line-clamp-2">${announcement.requirements}</p>
                    </div>
                </div>
            `;
        }

        function editAnnouncement(announcementId) {
            const announcement = announcementsDatabase.find(ann => ann.id === announcementId);
            if (announcement) {
                editingAnnouncementId = announcementId;
                
                // Fill form with existing data
                document.getElementById('agency-name').value = announcement.agencyName;
                document.getElementById('agency-type').value = announcement.agencyType;
                document.getElementById('agency-province').value = announcement.province;
                document.getElementById('contact-person').value = announcement.contactPerson;
                document.getElementById('contact-phone').value = announcement.contactPhone;
                document.getElementById('contact-email').value = announcement.contactEmail;
                document.getElementById('position-title').value = announcement.positionTitle;
                document.getElementById('position-level').value = announcement.positionLevel;
                document.getElementById('position-count').value = announcement.positionCount;
                document.getElementById('salary-range').value = announcement.salaryRange;
                document.getElementById('position-requirements').value = announcement.requirements;
                document.getElementById('position-responsibilities').value = announcement.responsibilities;
                document.getElementById('application-start').value = announcement.applicationStart;
                document.getElementById('application-end').value = announcement.applicationEnd;
                document.getElementById('start-work-date').value = announcement.startWorkDate;
                document.getElementById('application-method').value = announcement.applicationMethod;
                document.getElementById('required-documents').value = announcement.requiredDocuments;
                document.getElementById('additional-info').value = announcement.additionalInfo;
                
                showPage('post');
                alert('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®: ' + announcement.positionTitle);
            }
        }

        function deleteAnnouncement(announcementId) {
            const announcement = announcementsDatabase.find(ann => ann.id === announcementId);
            if (announcement && confirm(`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® "${announcement.positionTitle}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
                const { database, ref, remove } = window.firebase;
                const announcementRef = ref(database, `announcements/${announcementId}`);
                
                remove(announcementRef).then(() => {
                    alert('‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
                    console.log('‚úÖ ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏à‡∏≤‡∏Å Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', announcementId);
                }).catch((error) => {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                });
            }
        }

        function publishFromAdmin(announcementId) {
            const { database, ref, update } = window.firebase;
            const announcementRef = ref(database, `announcements/${announcementId}`);
            
            const updates = {
                status: 'published',
                publishDate: new Date().toISOString().split('T')[0],
                updatedAt: Date.now()
            };
            
            update(announcementRef, updates).then(() => {
                alert('‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
                console.log('‚úÖ ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏ô Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', announcementId);
            }).catch((error) => {
                console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            });
        }

        function exportData() {
            const data = {
                announcements: announcementsDatabase,
                exportDate: new Date().toISOString(),
                totalAnnouncements: announcementsDatabase.length,
                publishedAnnouncements: announcementsDatabase.filter(ann => ann.status === 'published').length,
                totalApplications: announcementsDatabase.reduce((sum, ann) => sum + (ann.applications || 0), 0)
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `platform_data_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            alert('üìä ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
        }

        function clearOldAnnouncements() {
            const today = new Date();
            const oldAnnouncements = announcementsDatabase.filter(ann => {
                const endDate = new Date(ann.applicationEnd);
                return endDate < today && ann.status === 'published';
            });
            
            if (oldAnnouncements.length === 0) {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß');
                return;
            }
            
            if (confirm(`‡∏û‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß ${oldAnnouncements.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\n‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
                const { database, ref, remove } = window.firebase;
                const deletePromises = oldAnnouncements.map(ann => {
                    const announcementRef = ref(database, `announcements/${ann.id}`);
                    return remove(announcementRef);
                });
                
                Promise.all(deletePromises).then(() => {
                    alert(`üßπ ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß ${oldAnnouncements.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`);
                    console.log('‚úÖ ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏à‡∏≤‡∏Å Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }).catch((error) => {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                });
            }
        }

        function sendNotifications() {
            const recentAnnouncements = announcementsDatabase.filter(ann => {
                const publishDate = new Date(ann.publishDate);
                const today = new Date();
                const diffTime = Math.abs(today - publishDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays <= 7 && ann.status === 'published';
            });
            
            if (recentAnnouncements.length === 0) {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 7 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤');
                return;
            }
            
            alert(`üìß ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà ${recentAnnouncements.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á:\n${recentAnnouncements.map(ann => `‚Ä¢ ${ann.positionTitle} - ${ann.agencyName}`).join('\n')}`);
        }

        function createAnnouncementCard(announcement, isCompact = false) {
            const today = new Date();
            const endDate = new Date(announcement.applicationEnd);
            const isExpired = today > endDate;
            const daysLeft = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));
            
            return `
                <div class="announcement-card bg-white rounded-xl shadow-lg p-6 ${isCompact ? 'h-auto' : 'h-full'} flex flex-col">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex flex-col space-y-1">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">${announcement.positionLevel}</span>
                            <span class="text-xs text-gray-600">üèõÔ∏è ${announcement.agencyName}</span>
                            <span class="text-xs text-gray-600">üìç ${announcement.province}</span>
                        </div>
                        <div class="text-right">
                            <span class="text-sm text-blue-700 font-medium">‡∏£‡∏±‡∏ö ${announcement.positionCount} ‡∏Ñ‡∏ô</span>
                            <div class="text-xs text-gray-500">üìù ${announcement.applications || 0} ‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</div>
                            <div class="text-xs text-gray-500 flex items-center justify-end mt-1">
                                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                                </svg>
                                ${announcement.views || 0} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                            </div>
                        </div>
                    </div>
                    
                    <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${announcement.positionTitle}</h3>
                    
                    <div class="text-sm text-gray-600 mb-3">
                        <div class="flex items-center mb-1">
                            <span class="mr-2">üí∞</span>
                            <span>${announcement.salaryRange || '‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®'}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="mr-2">üìû</span>
                            <span>${announcement.contactPerson}</span>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 mb-4 flex-grow ${isCompact ? 'line-clamp-2' : 'line-clamp-3'}">${announcement.requirements}</p>
                    
                    <div class="border-t pt-4 mt-auto">
                        <div class="flex items-center justify-between mb-3">
                            <div class="text-sm text-gray-600">
                                <div class="flex items-center mb-1">
                                    <span class="mr-2">üìÖ</span>
                                    <span>‡πÄ‡∏£‡∏¥‡πà‡∏°: ${formatDate(announcement.applicationStart)}</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="mr-2">‚è∞</span>
                                    <span>‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î: ${formatDate(announcement.applicationEnd)}</span>
                                </div>
                            </div>
                            <div class="text-right">
                                ${!isExpired ? 
                                    `<div class="text-sm font-medium ${daysLeft <= 7 ? 'text-red-600' : 'text-green-700'}">
                                        ${daysLeft > 0 ? `‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${daysLeft} ‡∏ß‡∏±‡∏ô` : '‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'}
                                    </div>` :
                                    `<div class="text-sm font-medium text-gray-500">‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡∏ï‡πÅ‡∏•‡πâ‡∏ß</div>`
                                }
                            </div>
                        </div>
                        
                        <div class="space-y-2">
                            <button 
                                onclick="openApplicationModal('${announcement.id}')" 
                                class="apply-btn w-full text-white py-3 rounded-lg font-semibold ${isExpired ? 'bg-gray-400 cursor-not-allowed' : ''}"
                                ${isExpired ? 'disabled' : ''}
                            >
                                ${isExpired ? 'üîí ‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡∏ï‡∏™‡∏°‡∏±‡∏Ñ‡∏£' : '‚úçÔ∏è ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢'}
                            </button>
                            <button 
                                onclick="downloadAnnouncement('${announcement.id}')" 
                                class="w-full bg-gray-100 text-gray-700 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors text-sm border border-gray-300"
                            >
                                üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function downloadAnnouncement(announcementId) {
            const announcement = announcementsDatabase.find(ann => ann.id === announcementId);
            if (announcement) {
                // Track view for download
                trackAnnouncementView(announcementId);
                const content = `
‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£

‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô: ${announcement.agencyName}
‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${announcement.agencyType}
‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î: ${announcement.province}

‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢: ${announcement.positionTitle}
‡∏£‡∏∞‡∏î‡∏±‡∏ö: ${announcement.positionLevel}
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö: ${announcement.positionCount} ‡∏Ñ‡∏ô
‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô: ${announcement.salaryRange}

‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:
${announcement.requirements}

‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:
${announcement.responsibilities}

‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£:
‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£: ${formatDate(announcement.applicationStart)}
‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£: ${formatDate(announcement.applicationEnd)}
‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô: ${formatDate(announcement.startWorkDate)}

‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£: ${getApplicationMethodText(announcement.applicationMethod)}

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ:
${announcement.requiredDocuments}

‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:
${announcement.additionalInfo}

‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°:
${announcement.contactPerson}
‡πÇ‡∏ó‡∏£: ${announcement.contactPhone}
‡∏≠‡∏µ‡πÄ‡∏°‡∏•: ${announcement.contactEmail}

---
‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${formatDate(announcement.publishDate)}
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${announcement.applications || 0} ‡∏Ñ‡∏ô
                `;

                const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢_${announcement.agencyName}_${announcement.positionTitle}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
                alert('‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
            }
        }

        function getApplicationMethodText(method) {
            const methods = {
                'online': '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå',
                'mail': '‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå',
                'inperson': '‡∏¢‡∏∑‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á',
                'email': '‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•'
            };
            return methods[method] || method;
        }

        function displayPagination(totalItems) {
            const totalPages = Math.ceil(totalItems / announcementsPerPage);
            const container = document.getElementById('pagination');
            
            let paginationHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <button onclick="changePage(${i})" class="px-4 py-2 rounded-lg ${i === currentAnnouncementPage ? 'bg-green-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-100'} border transition-colors">
                        ${i}
                    </button>
                `;
            }
            
            container.innerHTML = paginationHTML;
        }

        function changePage(page) {
            currentAnnouncementPage = page;
            displayAnnouncements();
        }

        function openApplicationModal(announcementId) {
            const announcement = announcementsDatabase.find(ann => ann.id === announcementId);
            if (announcement) {
                // Track view
                trackAnnouncementView(announcementId);
                
                currentAnnouncementId = announcementId;
                document.getElementById('modal-announcement-title').textContent = 
                    `${announcement.positionTitle} - ${announcement.agencyName}`;
                document.getElementById('application-modal').classList.remove('hidden');
                
                // Clear form
                document.getElementById('applicant-name').value = '';
                document.getElementById('applicant-current-position').value = '';
                document.getElementById('applicant-current-agency').value = '';
                document.getElementById('applicant-email').value = '';
                document.getElementById('applicant-phone').value = '';
                document.getElementById('applicant-reason').value = '';
            }
        }

        function trackAnnouncementView(announcementId) {
            const { database, ref, update } = window.firebase;
            const announcementRef = ref(database, `announcements/${announcementId}`);
            
            // Get current views count
            const announcement = announcementsDatabase.find(ann => ann.id === announcementId);
            const currentViews = announcement?.views || 0;
            
            // Update views count
            update(announcementRef, { 
                views: currentViews + 1,
                lastViewedAt: Date.now()
            }).then(() => {
                console.log('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', announcementId);
            }).catch((error) => {
                console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°:', error);
            });
        }

        function closeModal() {
            document.getElementById('application-modal').classList.add('hidden');
            currentAnnouncementId = null;
        }

        function submitApplication() {
            const name = document.getElementById('applicant-name').value;
            const currentPosition = document.getElementById('applicant-current-position').value;
            const currentAgency = document.getElementById('applicant-current-agency').value;
            const email = document.getElementById('applicant-email').value;
            const phone = document.getElementById('applicant-phone').value;
            const reason = document.getElementById('applicant-reason').value;
            
            if (!name || !currentPosition || !currentAgency || !email || !phone || !reason) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            const { database, ref, push, update } = window.firebase;
            
            // Save application to Firebase
            const applicationsRef = ref(database, `applications/${currentAnnouncementId}`);
            const applicationData = {
                name,
                currentPosition,
                currentAgency,
                email,
                phone,
                reason,
                appliedAt: Date.now(),
                status: 'pending'
            };
            
            push(applicationsRef, applicationData).then(() => {
                // Update application count in announcement
                const announcementRef = ref(database, `announcements/${currentAnnouncementId}`);
                const announcement = announcementsDatabase.find(ann => ann.id === currentAnnouncementId);
                const newCount = (announcement?.applications || 0) + 1;
                
                update(announcementRef, { 
                    applications: newCount,
                    updatedAt: Date.now()
                }).then(() => {
                    alert('‡∏™‡πà‡∏á‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 7-15 ‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£');
                    closeModal();
                    console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏ô Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }).catch((error) => {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£:', error);
                });
            }).catch((error) => {
                console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            });
        }

        // Post announcement functions
        function publishAnnouncement() {
            if (!validateAnnouncementForm()) return;
            
            const announcementData = getAnnouncementFormData();
            const { database, ref, set, update } = window.firebase;
            
            if (editingAnnouncementId) {
                // Update existing announcement
                const announcementRef = ref(database, `announcements/${editingAnnouncementId}`);
                const updates = {
                    ...announcementData,
                    status: 'published',
                    publishDate: new Date().toISOString().split('T')[0],
                    updatedAt: Date.now()
                };
                
                update(announcementRef, updates).then(() => {
                    alert('üéâ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
                    clearAnnouncementForm();
                    showPage('announcements');
                    console.log('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏ô Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', editingAnnouncementId);
                }).catch((error) => {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                });
                
                editingAnnouncementId = null;
            } else {
                // Create new announcement
                const newAnnouncementRef = ref(database, `announcements/ann_${Date.now()}`);
                const newAnnouncementData = {
                    ...announcementData,
                    status: 'published',
                    publishDate: new Date().toISOString().split('T')[0],
                    applications: 0,
                    createdAt: Date.now(),
                    updatedAt: Date.now()
                };
                
                set(newAnnouncementRef, newAnnouncementData).then(() => {
                    alert('üéâ ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ');
                    clearAnnouncementForm();
                    showPage('announcements');
                    console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }).catch((error) => {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                });
            }
        }

        function saveDraft() {
            if (!validateAnnouncementForm(false)) return;
            
            const announcementData = getAnnouncementFormData();
            const { database, ref, set, update } = window.firebase;
            
            if (editingAnnouncementId) {
                // Update existing announcement as draft
                const announcementRef = ref(database, `announcements/${editingAnnouncementId}`);
                const updates = {
                    ...announcementData,
                    status: 'draft',
                    updatedAt: Date.now()
                };
                
                update(announcementRef, updates).then(() => {
                    alert('üíæ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
                    clearAnnouncementForm();
                    console.log('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡πà‡∏≤‡∏á‡πÉ‡∏ô Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', editingAnnouncementId);
                }).catch((error) => {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡πà‡∏≤‡∏á:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡πà‡∏≤‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                });
                
                editingAnnouncementId = null;
            } else {
                // Create new draft
                const newDraftRef = ref(database, `announcements/draft_${Date.now()}`);
                const newDraftData = {
                    ...announcementData,
                    status: 'draft',
                    applications: 0,
                    createdAt: Date.now(),
                    updatedAt: Date.now()
                };
                
                set(newDraftRef, newDraftData).then(() => {
                    alert('üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á');
                    clearAnnouncementForm();
                    console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }).catch((error) => {
                    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡πà‡∏≤‡∏á:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡πà‡∏≤‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                });
            }
        }

        function previewAnnouncement() {
            if (!validateAnnouncementForm(false)) return;
            
            const data = getAnnouncementFormData();
            const previewContent = `
‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®:

‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô: ${data.agencyName}
‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${data.positionTitle}
‡∏£‡∏∞‡∏î‡∏±‡∏ö: ${data.positionLevel}
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${data.positionCount} ‡∏Ñ‡∏ô
‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô: ${data.salaryRange}

‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥: ${data.requirements}

‡∏ä‡πà‡∏ß‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£: ${formatDate(data.applicationStart)} - ${formatDate(data.applicationEnd)}
‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${data.contactPerson} (${data.contactPhone})
            `;
            
            alert(previewContent);
        }

        function validateAnnouncementForm(requireAll = true) {
            const requiredFields = [
                'agency-name', 'agency-type', 'agency-province', 'contact-person', 
                'contact-phone', 'contact-email', 'position-title', 'position-level', 
                'position-count', 'position-requirements', 'position-responsibilities',
                'application-start', 'application-end', 'application-method'
            ];
            
            for (let fieldId of requiredFields) {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    alert(`‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å${field.previousElementSibling?.textContent || fieldId}`);
                    field.focus();
                    return false;
                }
            }
            
            // Validate dates
            const startDate = new Date(document.getElementById('application-start').value);
            const endDate = new Date(document.getElementById('application-end').value);
            
            if (startDate >= endDate) {
                alert('‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î');
                return false;
            }
            
            return true;
        }

        function getAnnouncementFormData() {
            return {
                agencyName: document.getElementById('agency-name').value,
                agencyType: document.getElementById('agency-type').value,
                province: document.getElementById('agency-province').value,
                contactPerson: document.getElementById('contact-person').value,
                contactPhone: document.getElementById('contact-phone').value,
                contactEmail: document.getElementById('contact-email').value,
                positionTitle: document.getElementById('position-title').value,
                positionLevel: document.getElementById('position-level').value,
                positionCount: parseInt(document.getElementById('position-count').value),
                salaryRange: document.getElementById('salary-range').value,
                requirements: document.getElementById('position-requirements').value,
                responsibilities: document.getElementById('position-responsibilities').value,
                applicationStart: document.getElementById('application-start').value,
                applicationEnd: document.getElementById('application-end').value,
                startWorkDate: document.getElementById('start-work-date').value,
                applicationMethod: document.getElementById('application-method').value,
                requiredDocuments: document.getElementById('required-documents').value,
                additionalInfo: document.getElementById('additional-info').value
            };
        }

        function clearAnnouncementForm() {
            const formFields = [
                'agency-name', 'agency-type', 'agency-province', 'contact-person',
                'contact-phone', 'contact-email', 'position-title', 'position-level',
                'position-count', 'salary-range', 'position-requirements', 
                'position-responsibilities', 'start-work-date', 'application-method',
                'required-documents', 'additional-info'
            ];
            
            formFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.value = '';
            });
            
            editingAnnouncementId = null;
            setTodayDate();
        }

        function setTodayDate() {
            const today = new Date().toISOString().split('T')[0];
            const nextMonth = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            const nextMonthPlus = new Date(Date.now() + 60 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            
            const startField = document.getElementById('application-start');
            const endField = document.getElementById('application-end');
            const workField = document.getElementById('start-work-date');
            
            if (startField) startField.value = today;
            if (endField) endField.value = nextMonth;
            if (workField) workField.value = nextMonthPlus;
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('th-TH', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        // Search and filter functionality
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const searchInput = document.getElementById('search-input');
                const positionFilter = document.getElementById('position-filter');
                const locationFilter = document.getElementById('location-filter');
                const adminStatusFilter = document.getElementById('admin-status-filter');
                const adminSearch = document.getElementById('admin-search');
                
                if (searchInput) {
                    searchInput.addEventListener('input', () => {
                        currentAnnouncementPage = 1;
                        displayAnnouncements();
                    });
                }
                
                if (positionFilter) {
                    positionFilter.addEventListener('change', () => {
                        currentAnnouncementPage = 1;
                        displayAnnouncements();
                    });
                }
                
                if (locationFilter) {
                    locationFilter.addEventListener('change', () => {
                        currentAnnouncementPage = 1;
                        displayAnnouncements();
                    });
                }
                
                if (adminStatusFilter) {
                    adminStatusFilter.addEventListener('change', displayAdminAnnouncements);
                }
                
                if (adminSearch) {
                    adminSearch.addEventListener('input', displayAdminAnnouncements);
                }
            }, 100);
        });

        // Close modal when clicking outside
        document.getElementById('application-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
<script>
  // ===============================
  // Global State
  // ===============================
  let allAnnouncements = [];
  let currentAnnouncementPage = 1;
  let editingAnnouncementId = null;
  let isAdminLoggedIn = false;

  const ANNOUNCEMENTS_PER_PAGE = 6;

  // ===============================
  // Bootstrapping
  // ===============================
  document.addEventListener('DOMContentLoaded', () => {
    initializeAuth();
    initializeApp();          // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô setTodayDate / showPage ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÄ‡∏î‡∏¥‡∏° ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
    if (typeof setTodayDate === 'function') setTodayDate();
  });

  function initializeApp() {
    console.log('üöÄ Initializing announcement platform...');
    loadDataFromFirebase();
  }

  function initializeAuth() {
    const { auth, onAuthStateChanged } = window.firebase || {};
    if (!auth || !onAuthStateChanged) {
      console.warn('‚ö†Ô∏è Firebase Auth ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å expose ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô window.firebase');
      return;
    }
    onAuthStateChanged(auth, (user) => {
      isAdminLoggedIn = !!user;
      console.log(isAdminLoggedIn ? `‚úÖ Admin logged in: ${user.email}` : 'üö™ Admin logged out');
      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏ñ‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ
      if (typeof updateAuthUI === 'function') updateAuthUI(isAdminLoggedIn, user?.email || null);
      // ‡∏£‡∏µ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° Edit/Delete ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
      renderAnnouncementsPage(currentAnnouncementPage);
    });
  }

  // ===============================
  // Create (Publish)
  // ===============================
  async function publishAnnouncement() {
    const { database, ref, push, set } = window.firebase || {};
    if (!database || !ref || !push || !set) {
      alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
      return;
    }

    // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
    const agencyName = document.getElementById("agency-name").value.trim();
    const agencyType = document.getElementById("agency-type").value;
    const agencyProvince = document.getElementById("agency-province").value;
    const contactPerson = document.getElementById("contact-person").value.trim();
    const contactPhone = document.getElementById("contact-phone").value.trim();
    const contactEmail = document.getElementById("contact-email").value.trim();

    const positionTitle = document.getElementById("position-title").value.trim();
    const positionLevel = document.getElementById("position-level").value;
    const positionCount = document.getElementById("position-count").value;
    const salaryRange = document.getElementById("salary-range").value.trim();
    const positionRequirements = document.getElementById("position-requirements").value.trim();
    const positionResponsibilities = document.getElementById("position-responsibilities").value.trim();

    const applicationStart = document.getElementById("application-start").value;
    const applicationEnd   = document.getElementById("application-end").value;
    const startWorkDate    = document.getElementById("start-work-date").value;
    const applicationMethod = document.getElementById("application-method").value;
    const requiredDocuments = document.getElementById("required-documents").value.trim();
    const additionalInfo    = document.getElementById("additional-info").value.trim();

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö
    if (!agencyName || !agencyType || !agencyProvince || !contactPerson || !contactPhone || !contactEmail ||
        !positionTitle || !positionLevel || !positionCount || !positionRequirements || !positionResponsibilities ||
        !applicationStart || !applicationEnd || !applicationMethod) {
      alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ * ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
      return;
    }

    try {
      const announcementsRef = ref(database, "announcements");
      const newRef = push(announcementsRef);

      await set(newRef, {
        agencyName, agencyType, agencyProvince,
        contactPerson, contactPhone, contactEmail,
        positionTitle, positionLevel, positionCount, salaryRange,
        positionRequirements, positionResponsibilities,
        applicationStart, applicationEnd, startWorkDate,
        applicationMethod, requiredDocuments, additionalInfo,
        createdAt: new Date().toISOString(),
        status: "published"
      });

      alert("‚úÖ ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
      editingAnnouncementId = null;
      if (typeof showPage === 'function') showPage("announcements");
      // ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡∏¥‡∏™‡∏ï‡πå
      loadDataFromFirebase();
      // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
      const form = document.getElementById("announcementForm");
      if (form) form.reset();
    } catch (err) {
      console.error("‚ùå Error publishing announcement:", err);
      alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®");
    }
  }

  // ===============================
  // Read (Load + Render + Pagination)
  // ===============================
  function loadDataFromFirebase() {
    const { database, ref, onValue } = window.firebase || {};
    if (!database || !ref || !onValue) {
      console.warn('‚ö†Ô∏è Firebase Database ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å expose ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô window.firebase');
      return;
    }

    const announcementsRef = ref(database, "announcements");
    const announcementsList = document.getElementById("announcements-list");
    const recentAnnouncements = document.getElementById("recent-announcements");

    if (announcementsList) announcementsList.innerHTML = "";
    if (recentAnnouncements) recentAnnouncements.innerHTML = "";

    onValue(announcementsRef, (snapshot) => {
      if (!snapshot.exists()) {
        if (announcementsList) announcementsList.innerHTML = "<p class='text-gray-500'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</p>";
        // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢
        setStats(0, 0, 0);
        // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå pagination
        const pagination = document.getElementById("pagination");
        if (pagination) pagination.innerHTML = "";
        return;
      }

      const data = snapshot.val();
      allAnnouncements = Object.entries(data).map(([id, item]) => ({ id, ...item }));

      // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô
      allAnnouncements.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));

      // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå
      currentAnnouncementPage = 1;
      renderAnnouncementsPage(currentAnnouncementPage);

      // Recent (‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å)
      if (recentAnnouncements) {
        recentAnnouncements.innerHTML = "";
        allAnnouncements.slice(0, 3).forEach((ann) => {
          const card = document.createElement("div");
          card.className = "bg-white p-4 rounded-lg shadow hover:shadow-md transition";
          card.innerHTML = `
            <h4 class="text-lg font-bold text-blue-600">${ann.positionTitle || "-"}</h4>
            <p class="text-gray-600 text-sm">${ann.agencyName || "-"}</p>
            <p class="text-gray-500 text-xs mt-1">üìÖ ${ann.applicationStart || "-"} - ${ann.applicationEnd || "-"}</p>
          `;
          recentAnnouncements.appendChild(card);
        });
      }

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
      const total = allAnnouncements.length;
      const today = allAnnouncements.filter(a => a.createdAt && new Date(a.createdAt).toDateString() === new Date().toDateString()).length;
      const totalPositions = allAnnouncements.reduce((sum, a) => sum + (parseInt(a.positionCount || 0) || 0), 0);
      setStats(total, today, totalPositions);
    }, (error) => {
      console.error('‚ùå Realtime listener error:', error);
    });
  }

  function renderAnnouncementsPage(page) {
    const announcementsList = document.getElementById("announcements-list");
    if (!announcementsList) return;

    announcementsList.innerHTML = "";

    const start = (page - 1) * ANNOUNCEMENTS_PER_PAGE;
    const end = start + ANNOUNCEMENTS_PER_PAGE;
    const current = allAnnouncements.slice(start, end);

    current.forEach((ann) => {
      const card = document.createElement("div");
      card.className = "announcement-card bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition";
      card.innerHTML = `
        <h3 class="text-xl font-bold text-blue-700 mb-2">${ann.positionTitle || "-"}</h3>
        <p class="text-gray-700 mb-1"><span class="font-semibold">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:</span> ${ann.agencyName || "-"}</p>
        <p class="text-gray-700 mb-1"><span class="font-semibold">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</span> ${ann.agencyProvince || "-"}</p>
        <p class="text-gray-700 mb-1"><span class="font-semibold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span> ${ann.positionCount || "0"} ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</p>
        <p class="text-gray-600 text-sm mt-2">üìÖ ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£: ${ann.applicationStart || "-"} ‡∏ñ‡∏∂‡∏á ${ann.applicationEnd || "-"}</p>
      `;

      // ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin
      if (isAdminLoggedIn) {
        const controls = document.createElement("div");
        controls.className = "mt-3 flex gap-2";
        controls.innerHTML = `
          <button class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600" onclick="editAnnouncement('${ann.id}')">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
          <button class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700" onclick="deleteAnnouncement('${ann.id}')">üóëÔ∏è ‡∏•‡∏ö</button>
        `;
        card.appendChild(controls);
      }

      announcementsList.appendChild(card);
    });

    // Pagination
    const totalPages = Math.ceil(allAnnouncements.length / ANNOUNCEMENTS_PER_PAGE) || 1;
    setupPagination(totalPages, page);
  }

  function setupPagination(totalPages, currentPage) {
    const pagination = document.getElementById("pagination");
    if (!pagination) return;

    pagination.innerHTML = "";
    if (totalPages <= 1) return;

    // Prev
    const prevBtn = document.createElement("button");
    prevBtn.textContent = "‚Üê";
    prevBtn.className = "px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50";
    prevBtn.disabled = currentPage === 1;
    prevBtn.onclick = () => {
      currentAnnouncementPage = Math.max(1, currentAnnouncementPage - 1);
      renderAnnouncementsPage(currentAnnouncementPage);
    };
    pagination.appendChild(prevBtn);

    // Numbered pages (‡∏¢‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏≤‡∏ß)
    const MAX_PAGE_BUTTONS = 7;
    let pages = [];
    if (totalPages <= MAX_PAGE_BUTTONS) {
      pages = Array.from({ length: totalPages }, (_, i) => i + 1);
    } else {
      // 1 ... mid-1, mid, mid+1 ... total
      const left = Math.max(2, currentPage - 1);
      const right = Math.min(totalPages - 1, currentPage + 1);
      pages = [1, ...(left > 2 ? ['...'] : []), ...range(left, right), ...(right < totalPages - 1 ? ['...'] : []), totalPages];
    }

    pages.forEach(p => {
      if (p === '...') {
        const dot = document.createElement("span");
        dot.textContent = '...';
        dot.className = "px-2";
        pagination.appendChild(dot);
      } else {
        const btn = document.createElement("button");
        btn.textContent = p;
        btn.className = "px-3 py-1 rounded " + (p === currentPage ? "bg-blue-600 text-white" : "bg-gray-200 hover:bg-gray-300");
        btn.onclick = () => { currentAnnouncementPage = p; renderAnnouncementsPage(p); };
        pagination.appendChild(btn);
      }
    });

    // Next
    const nextBtn = document.createElement("button");
    nextBtn.textContent = "‚Üí";
    nextBtn.className = "px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50";
    nextBtn.disabled = currentPage === totalPages;
    nextBtn.onclick = () => {
      currentAnnouncementPage = Math.min(totalPages, currentAnnouncementPage + 1);
      renderAnnouncementsPage(currentAnnouncementPage);
    };
    pagination.appendChild(nextBtn);
  }

  function range(a, b) {
    const out = [];
    for (let i = a; i <= b; i++) out.push(i);
    return out;
  }

  function setStats(total, today, totalPositions) {
    const totalEl = document.getElementById("total-announcements");
    const todayEl = document.getElementById("today-announcements");
    const posEl   = document.getElementById("total-positions");
    if (totalEl) totalEl.textContent = total;
    if (todayEl) todayEl.textContent = today;
    if (posEl) posEl.textContent = totalPositions;
  }

  // ===============================
  // Update (Edit ‚Üí Update)
  // ===============================
  function editAnnouncement(id) {
    const ann = allAnnouncements.find(a => a.id === id);
    if (!ann) return;

    // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏•‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
    setValue("agency-name", ann.agencyName);
    setValue("agency-type", ann.agencyType);
    setValue("agency-province", ann.agencyProvince);
    setValue("contact-person", ann.contactPerson);
    setValue("contact-phone", ann.contactPhone);
    setValue("contact-email", ann.contactEmail);

    setValue("position-title", ann.positionTitle);
    setValue("position-level", ann.positionLevel);
    setValue("position-count", ann.positionCount);
    setValue("salary-range", ann.salaryRange);
    setValue("position-requirements", ann.positionRequirements);
    setValue("position-responsibilities", ann.positionResponsibilities);

    setValue("application-start", ann.applicationStart);
    setValue("application-end", ann.applicationEnd);
    setValue("start-work-date", ann.startWorkDate);
    setValue("application-method", ann.applicationMethod);
    setValue("required-documents", ann.requiredDocuments);
    setValue("additional-info", ann.additionalInfo);

    editingAnnouncementId = id;

    // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® (‡πÉ‡∏ä‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
    if (typeof showPage === 'function') showPage("publish");
  }

  async function updateAnnouncement() {
    if (!editingAnnouncementId) return;

    const { database, ref, update } = window.firebase || {};
    if (!database || !ref || !update) {
      alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
      return;
    }

    const annRef = ref(database, "announcements/" + editingAnnouncementId);

    const payload = {
      agencyName: getValue("agency-name"),
      agencyType: getValue("agency-type"),
      agencyProvince: getValue("agency-province"),
      contactPerson: getValue("contact-person"),
      contactPhone: getValue("contact-phone"),
      contactEmail: getValue("contact-email"),

      positionTitle: getValue("position-title"),
      positionLevel: getValue("position-level"),
      positionCount: getValue("position-count"),
      salaryRange: getValue("salary-range"),
      positionRequirements: getValue("position-requirements"),
      positionResponsibilities: getValue("position-responsibilities"),

      applicationStart: getValue("application-start"),
      applicationEnd: getValue("application-end"),
      startWorkDate: getValue("start-work-date"),
      applicationMethod: getValue("application-method"),
      requiredDocuments: getValue("required-documents"),
      additionalInfo: getValue("additional-info"),

      updatedAt: new Date().toISOString()
    };

    try {
      await update(annRef, payload);
      alert("‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
      editingAnnouncementId = null;
      if (typeof showPage === 'function') showPage("announcements");
      loadDataFromFirebase();
      const form = document.getElementById("announcementForm");
      if (form) form.reset();
    } catch (err) {
      console.error("‚ùå Error updating announcement:", err);
      alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç");
    }
  }

  // ===============================
  // Delete
  // ===============================
  async function deleteAnnouncement(id) {
    if (!confirm("‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ô‡∏µ‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return;

    const { database, ref, remove } = window.firebase || {};
    if (!database || !ref || !remove) {
      alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
      return;
    }

    try {
      await remove(ref(database, "announcements/" + id));
      alert("üóëÔ∏è ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
      loadDataFromFirebase();
    } catch (err) {
      console.error("‚ùå Error deleting announcement:", err);
      alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö");
    }
  }

  // ===============================
  // Helpers
  // ===============================
  function setValue(id, val) {
    const el = document.getElementById(id);
    if (el) el.value = val ?? "";
  }
  function getValue(id) {
    const el = document.getElementById(id);
    return el ? (el.value ?? "").trim() : "";
  }

  // ===============================
  // Expose functions to buttons (‡∏ñ‡πâ‡∏≤‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÇ‡∏î‡∏¢ onclick="")
  // ===============================
  window.publishAnnouncement = publishAnnouncement;
  window.updateAnnouncement  = updateAnnouncement;
  window.editAnnouncement    = editAnnouncement;
  window.deleteAnnouncement  = deleteAnnouncement;
</script>
</body>
</html>


